# SyftHub NATS Server - Production Configuration
# Provides pub/sub messaging for P2P communication between SyftAI Spaces

server_name: syfthub-nats

# Client connections (internal Docker network)
listen: 0.0.0.0:4222

# HTTP monitoring endpoint
http_port: 8222

# WebSocket for browser/external clients (proxied via nginx with TLS termination)
websocket {
    port: 9222
    no_tls: true
    compression: true
}

# JetStream - persistent messaging
jetstream {
    store_dir: /data/jetstream
    max_memory_store: 1GB
    max_file_store: 10GB
}

# Logging
debug: false
trace: false
logtime: true

# Connection limits
max_connections: 4096
max_payload: 1MB
ping_interval: "30s"

# Authentication - shared token for all connections
authorization {
    token: $NATS_AUTH_TOKEN
}
