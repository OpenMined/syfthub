version: '3.8'

services:
  api:
    build:
      context: .
      dockerfile: Dockerfile.simple
    environment:
      ENVIRONMENT: development
      DATABASE_URL: sqlite:////app/data/syfthub.db
      SECRET_KEY: dev-secret-key-change-in-production
      DEBUG: "true"
      RELOAD: "true"
      LOG_LEVEL: debug
    ports:
      - "8000:8000"
    volumes:
      - ./src:/app/src:cached
      - ./tests:/app/tests:cached
      - ./pyproject.toml:/app/pyproject.toml:cached
      - ./data:/app/data
    command: ["uvicorn", "syfthub.main:app", "--host", "0.0.0.0", "--port", "8000", "--reload", "--reload-dir", "src"]
